<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="ISO-8859-1">
<title>Person Management</title>
<script type="text/javascript" src="/jquery.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.3/jquery.min.js"></script>
</head>
<body>
<div align="center">
		
	<h1>Person Management</h1>
	<a th:href="@{/new}">Create New Person</a>
	<br/><br/>

	<table border="1" cellpadding="10">
		<thead>
			<tr>
				<th>
					<p>ID</p>
				</th>
				<th>
				    <p>Name</p>
				</th>
				
				<th>Actions</th>
			</tr>
		</thead>
		<tbody>
			<tr th:each="p : ${listPersons}">
				<td th:text="${p.id}">Product ID</td>
				<td th:text="${p.name}">Name</td>
				<td>
			     	<a >Detail </a>	&nbsp;&nbsp;&nbsp;&nbsp;
			     	
			     	
					<a>Edit</a>
					&nbsp;&nbsp;&nbsp;&nbsp;
					<button type="button"  onclick ="deletePerson()" th:value="${p.id}" id="btndel">Delete</button>
				</td>
			</tr>
		</tbody>
	</table>
	<div>&nbsp;</div>
<script type="text/javascript">
   function deletePerson()
   {
       data = $("#btndel").val();
      // alert(id);
       $.ajax({
            url: '/api/'+ data+ '/user',
            type: 'DELETE',
            contentType: 'text/html',
            success: function () {
            	alert("delete person has id = " + data + " successfully");
            	window.location.href = "[[@{'/'}]]";
            },
            error: function () {
            	alert("delete person has id = " + data + " fail");
            	window.location.href = "[[@{'/'}]]";
                 	      }});
   }

</script>
	
</div>
</body>
</html>